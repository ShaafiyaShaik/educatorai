# Render service manifest for educatorai
# This file declares two services:
# 1) educatorai-backend - a Python web service that runs FastAPI via uvicorn
# 2) educatorai-frontend - a Static Site that builds the CRA frontend and publishes the build
#
# Notes:
# - Replace placeholders (EXPLORE_BACKEND_URL) with the real backend URL after the backend is deployed,
#   or set the env var `REACT_APP_API_BASE_URL` in the Render dashboard for the frontend service.
# - The backend requirements may include heavy ML libraries (torch, transformers, langchain). These
#   can be large and may require a larger instance plan on Render. If installation fails on the free
#   plan, consider using a larger instance or moving heavy model inference to a specialized host.

services:
  - type: web
    name: educatorai-backend
    env: python
    # If you keep this repo on GitHub, Render will detect and use it when you create a new service.
    repo: https://github.com/ShaafiyaShaik/educatorai
    branch: main
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    plan: free
    autoDeploy: true
    # Add environment variables and secrets in the Render dashboard after creation
    # Example envVars to add on the Render UI (do not commit secrets to git):
    # - DATABASE_URL: <your-db-url>
    # - SECRET_KEY: <your-secret>

  - type: static
    name: educatorai-frontend
    env: static
    repo: https://github.com/ShaafiyaShaik/educatorai
    branch: main
    # Build from the frontend subfolder
    buildCommand: cd educator-ai-assistant/frontend && npm ci && npm run build
    staticPublishPath: educator-ai-assistant/frontend/build
    plan: free
    autoDeploy: true
    # IMPORTANT: Set REACT_APP_API_BASE_URL to point to your backend's public URL
    # You can set that value in the Render dashboard after the backend service is active.
    envVars:
      - key: REACT_APP_API_BASE_URL
        value: "https://EXPLORE_BACKEND_URL"

# Optional: you can add health checks, instance counts, and other settings in the Render UI
# or extend this manifest with more fields. See https://render.com/docs/deploy-using-render-yaml
